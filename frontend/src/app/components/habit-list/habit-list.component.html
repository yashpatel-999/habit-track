<div class="habit-list-container">
  <!-- Search Bar -->
  <div class="search-container">
    <div class="search-box">
      <i class="bi bi-search search-icon"></i>
      <input 
        type="text" 
        class="search-input" 
        placeholder="Search your habits..." 
        [(ngModel)]="searchTerm"
        (input)="onSearchChange()"
      >
      <button class="search-clear" *ngIf="searchTerm" (click)="clearSearch()">
        <i class="bi bi-x-circle-fill"></i>
      </button>
    </div>
    <div class="search-results-info" *ngIf="searchTerm">
      <small>{{ filteredHabits.length }} of {{ habits.length }} habits found</small>
    </div>
  </div>

  <div class="error-message" *ngIf="errorMessage">
    {{ errorMessage }}
  </div>

  <div class="loading" *ngIf="isLoading">
    Loading habits...
  </div>

  <div class="habits-grid" *ngIf="!isLoading && filteredHabits.length > 0">
    <div class="habit-card" *ngFor="let habit of filteredHabits">
      <div class="habit-header">
        <h3>{{ habit.title }}</h3>
        <div class="habit-actions">
          <button class="btn btn-small bg-success bg-opacity-25 action-button" (click)="logCompletion(habit.id)">
            <i class="bi bi-bookmark-check"></i>
          </button>
          <button class="btn btn-small bg-warning bg-opacity-25 action-button" (click)="viewProgress(habit.id)">
            <i class="bi bi-bar-chart-fill"></i>
          </button>
          <button class="btn btn-small bg-primary bg-opacity-25 action-button" (click)="editHabit(habit.id)">
            <i class="bi bi-pencil-square"></i>
          </button>
          <button class="btn btn-small bg-danger bg-opacity-25 action-button" (click)="deleteHabit(habit.id)">
            <i class="bi bi-trash dark"></i>
          </button>
        </div>
      </div>
      
      <div class="habit-description">
        <p>{{ habit.description }}</p>
      </div>
      
      <div class="habit-meta">
        <small>Frequency: {{ habit.frequency }}</small>
      </div>
    </div>
  </div>

  <div class="empty-state" *ngIf="!isLoading && filteredHabits.length === 0 && !searchTerm">
    <div class="empty-content">
      <h3>No habits yet</h3>
      <p>Start building better habits by creating your first one!</p>
      <button class="btn btn-primary" (click)="addNewHabit()">
        Create Your First Habit
      </button>
    </div>
  </div>

  <div class="empty-state" *ngIf="!isLoading && filteredHabits.length === 0 && searchTerm">
    <div class="empty-content">
      <i class="bi bi-search empty-search-icon"></i>
      <h3>No habits found</h3>
      <p>No habits match your search "{{ searchTerm }}"</p>
      <button class="btn btn-pastel-clear" (click)="clearSearch()">
        Clear Search
      </button>
    </div>
  </div>
</div>
